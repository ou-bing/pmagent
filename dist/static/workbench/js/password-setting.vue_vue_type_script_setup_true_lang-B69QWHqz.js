var p=(i,n,s)=>new Promise((m,t)=>{var r=e=>{try{c(s.next(e))}catch(o){t(o)}},a=e=>{try{c(s.throw(e))}catch(o){t(o)}},c=e=>e.done?m(e.value):Promise.resolve(e.value).then(r,a);c((s=s.apply(i,n)).next())});import{E as _,L as h}from"./bootstrap-Cg7-XUCZ.js";import{d,J as g,c as f,e as P,f as w,H as u,k as l,G as b,I as S,r as V,z as k}from"../jse/index-index-C-XMneWz.js";import{u as v,s as x}from"./use-vben-form-iXonrImG.js";const y=d({__name:"password-setting",props:{formSchema:{default:()=>[]}},emits:["submit"],setup(i,{expose:n,emit:s}){const m=i,t=s,[r,a]=v(g({commonConfig:{componentProps:{class:"w-full"}},layout:"horizontal",schema:f(()=>m.formSchema),showDefaultActions:!1}));function c(){return p(this,null,function*(){const{valid:e}=yield a.validate(),o=yield a.getValues();e&&t("submit",o)})}return n({getFormApi:()=>a}),(e,o)=>(w(),P("div",null,[u(l(r)),u(l(_),{type:"submit",class:"mt-4",onClick:c},{default:b(()=>[...o[0]||(o[0]=[S(" 更新密码 ",-1)])]),_:1})]))}}),A=d({__name:"password-setting",setup(i){const n=V(),s=f(()=>[{fieldName:"oldPassword",label:"旧密码",component:"VbenInputPassword",componentProps:{placeholder:"请输入旧密码"}},{fieldName:"newPassword",label:"新密码",component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:"请输入新密码"}},{fieldName:"confirmPassword",label:"确认密码",component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:"请再次输入新密码"},dependencies:{rules(t){const{newPassword:r}=t;return x({required_error:"请再次输入新密码"}).min(1,{message:"请再次输入新密码"}).refine(a=>a===r,{message:"两次输入的密码不一致"})},triggerFields:["newPassword"]}}]);function m(){h.success("密码修改成功")}return(t,r)=>(w(),k(l(y),{ref_key:"profilePasswordSettingRef",ref:n,class:"w-1/3","form-schema":s.value,onSubmit:m},null,8,["form-schema"]))}});export{A as _};
