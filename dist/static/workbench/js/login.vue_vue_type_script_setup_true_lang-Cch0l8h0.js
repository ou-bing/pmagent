var fe=Object.defineProperty,pe=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var W=(e,o,n)=>o in e?fe(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,I=(e,o)=>{for(var n in o||(o={}))Y.call(o,n)&&W(e,n,o[n]);if(j)for(var n of j(o))ee.call(o,n)&&W(e,n,o[n]);return e},U=(e,o)=>pe(e,me(o));var Q=(e,o)=>{var n={};for(var a in e)Y.call(e,a)&&o.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&j)for(var a of j(e))o.indexOf(a)<0&&ee.call(e,a)&&(n[a]=e[a]);return n};var N=(e,o,n)=>new Promise((a,r)=>{var u=f=>{try{d(n.next(f))}catch(p){r(p)}},i=f=>{try{d(n.throw(f))}catch(p){r(p)}},d=f=>f.done?a(f.value):Promise.resolve(f.value).then(u,i);d((n=n.apply(e,o)).next())});import{a as ge,O as E,b9 as he,U as le,G as H,ba as _e,Z as J,bb as ye,aw as ve,M as re,bc as ie,bd as be,be as we,E as T,bf as Ce,bg as te,bh as xe,$ as h,aS as O,bi as Ae,D as $e,bj as De,F as Be,ab as ke}from"./bootstrap-DNQXlPT3.js";import{T as Pe}from"./auth-title-XEIaR8U-.js";import{e as Le,f as qe,g as Ie,S as Me,h as Te}from"./index-BgUqYlIc.js";import{d as y,z as c,f as l,G as s,m as v,Z as L,$ as q,k as t,r as S,L as R,s as de,o as ue,e as P,c as F,H as m,g as w,q as Se,l as V,O as oe,P as Ee,h as z,n as K,j as C,E as X,t as A,I as k,y as Re,af as Fe,J as Oe}from"../jse/index-index-D6kz6zuY.js";import{a as ze,C as Ve,u as je,s as ne}from"./use-vben-form-DFL1MAaL.js";import{D as ce,a as Ue,b as Qe,c as Ne,d as Ke,C as Ge,X as Xe,u as Ze}from"./use-modal-CDsee1wj.js";import{_ as ae}from"./render-content.vue_vue_type_script_lang-1ZVKSlCD.js";const He=ge("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var Je=y({__name:"AlertDialogAction",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const o=e;return E(),(n,a)=>(l(),c(t(ce),L(q(o)),{default:s(()=>[v(n.$slots,"default")]),_:3},16))}}),We=Je;const[Ye,et]=le("AlertDialogContent");var tt=y({__name:"AlertDialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:o}){const n=e,r=he(o);E();const u=S();return et({onCancelElementChange:i=>{u.value=i}}),(i,d)=>(l(),c(t(Ue),R(I(I({},n),t(r)),{role:"alertdialog",onPointerDownOutside:d[0]||(d[0]=H(()=>{},["prevent"])),onInteractOutside:d[1]||(d[1]=H(()=>{},["prevent"])),onOpenAutoFocus:d[2]||(d[2]=()=>{de(()=>{var f;(f=u.value)==null||f.focus({preventScroll:!0})})})}),{default:s(()=>[v(i.$slots,"default")]),_:3},16))}}),ot=tt,nt=y({__name:"AlertDialogCancel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const o=e,n=Ye(),{forwardRef:a,currentElement:r}=E();return ue(()=>{n.onCancelElementChange(r.value)}),(u,i)=>(l(),c(t(ce),R(o,{ref:t(a)}),{default:s(()=>[v(u.$slots,"default")]),_:3},16))}}),at=nt,st=y({__name:"AlertDialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(e){const o=e;return E(),(n,a)=>(l(),c(t(Qe),L(q(o)),{default:s(()=>[v(n.$slots,"default")]),_:3},16))}}),lt=st,rt=y({__name:"AlertDialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const o=e;return(n,a)=>(l(),c(t(_e),L(q(o)),{default:s(()=>[v(n.$slots,"default")]),_:3},16))}}),it=rt,dt=y({__name:"AlertDialogRoot",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1}},emits:["update:open"],setup(e,{emit:o}){const r=J(e,o);return E(),(u,i)=>(l(),c(t(Ne),R(t(r),{modal:!0}),{default:s(d=>[v(u.$slots,"default",L(q(d)))]),_:3},16))}}),ut=dt,ct=y({__name:"AlertDialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(e){const o=e;return E(),(n,a)=>(l(),c(t(Ke),L(q(o)),{default:s(()=>[v(n.$slots,"default")]),_:3},16))}}),ft=ct;const pt=y({__name:"AlertDialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(e,{emit:o}){const r=J(e,o);return(u,i)=>(l(),c(t(ut),L(q(t(r))),{default:s(()=>[v(u.$slots,"default")]),_:3},16))}}),mt=y({__name:"AlertDialogAction",props:{asChild:{type:Boolean},as:{}},setup(e){const o=e;return(n,a)=>(l(),c(t(We),L(q(o)),{default:s(()=>[v(n.$slots,"default")]),_:3},16))}}),se=y({__name:"AlertDialogCancel",props:{asChild:{type:Boolean},as:{}},setup(e){const o=e;return(n,a)=>(l(),c(t(at),L(q(o)),{default:s(()=>[v(n.$slots,"default")]),_:3},16))}}),gt={class:"z-popup inset-0 bg-overlay"},ht=y({__name:"AlertDialogOverlay",setup(e){return ye(),(o,n)=>(l(),P("div",gt))}}),_t=y({__name:"AlertDialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},centered:{type:Boolean},class:{},modal:{type:Boolean,default:!0},open:{type:Boolean},overlayBlur:{},zIndex:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","close","closed","opened"],setup(e,{expose:o,emit:n}){const a=e,r=n,u=F(()=>{const b=a,{class:p,modal:g,open:D}=b;return Q(b,["class","modal","open"])}),i=J(u,r),d=S(null);function f(p){var g;p.target===((g=d.value)==null?void 0:g.$el)&&(a.open?r("opened"):r("closed"))}return o({getContentRef:()=>d.value}),(p,g)=>(l(),c(t(it),null,{default:s(()=>[m(ve,{name:"fade",appear:""},{default:s(()=>[e.open&&e.modal?(l(),c(ht,{key:0,style:Se(U(I({},e.zIndex?{zIndex:e.zIndex}:{}),{position:"fixed",backdropFilter:e.overlayBlur&&e.overlayBlur>0?`blur(${e.overlayBlur}px)`:"none"})),onClick:g[0]||(g[0]=()=>r("close"))},null,8,["style"])):w("",!0)]),_:1}),m(t(ot),R({ref_key:"contentRef",ref:d,style:U(I({},e.zIndex?{zIndex:e.zIndex}:{}),{position:"fixed"}),onAnimationend:f},t(i),{class:t(V)("z-popup bg-background p-6 shadow-lg outline-none sm:rounded-xl","data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95",{"data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-top-[48%]":!e.centered,"data-[state=closed]:slide-out-to-top-[148%] data-[state=open]:slide-in-from-top-[98%]":e.centered,"top-[10vh]":!e.centered,"top-1/2 -translate-y-1/2":e.centered},a.class)}),{default:s(()=>[v(p.$slots,"default")]),_:3},16,["style","class"])]),_:3}))}}),yt=y({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const o=e,n=F(()=>{const i=o,{class:r}=i;return Q(i,["class"])}),a=re(n);return(r,u)=>(l(),c(t(lt),R(t(a),{class:t(V)("text-sm text-muted-foreground",o.class)}),{default:s(()=>[v(r.$slots,"default")]),_:3},16,["class"]))}}),vt=y({__name:"AlertDialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const o=e,n=F(()=>{const i=o,{class:r}=i;return Q(i,["class"])}),a=re(n);return(r,u)=>(l(),c(t(ft),R(t(a),{class:t(V)("text-lg font-semibold leading-none tracking-tight",o.class)}),{default:s(()=>[v(r.$slots,"default")]),_:3},16,["class"]))}}),[Zt,bt]=le("VbenAlertContext"),wt={class:"flex items-center"},Ct={class:"flex-auto"},xt={class:"m-4 min-h-[30px]"},At=y({__name:"alert",props:oe({beforeClose:{},bordered:{type:Boolean,default:!0},buttonAlign:{default:"end"},cancelText:{},centered:{type:Boolean,default:!0},confirmText:{},containerClass:{},content:{},contentClass:{},contentMasking:{type:Boolean},footer:{},icon:{},overlayBlur:{},showCancel:{type:Boolean},title:{}},{open:{type:Boolean,default:!1},openModifiers:{}}),emits:oe(["closed","confirm","opened"],["update:open"]),setup(e,{emit:o}){const n=e,a=o,r=Ee(e,"open"),{$t:u}=ie(),i=be.getComponents(),d=S(!1);function f(){a("closed",d.value),d.value=!1}function p(){d.value=!1}const g=F(()=>{var M;let $=null;if(n.icon){if(typeof n.icon=="string")switch(n.icon){case"error":{$=z(we,{style:{color:"hsl(var(--destructive))"}});break}case"info":{$=z(He,{style:{color:"hsl(var(--info))"}});break}case"question":{$=Ve;break}case"success":{$=z(Ge,{style:{color:"hsl(var(--success))"}});break}case"warning":{$=z(ze,{style:{color:"hsl(var(--warning))"}});break}default:{$=null;break}}}else $=(M=n.icon)!=null?M:null;return $});function D(){_(),G(!1)}function B(){b(),G(!1)}bt({doCancel:D,doConfirm:B});function b(){d.value=!0,a("confirm")}function _(){d.value=!1}const x=S(!1);function G($){return N(this,null,function*(){if(yield de(),!$&&n.beforeClose){x.value=!0;try{(yield n.beforeClose({isConfirm:d.value}))!==!1&&(r.value=!1)}finally{x.value=!1}}else r.value=$})}return($,M)=>(l(),c(t(pt),{open:r.value,"onUpdate:open":G},{default:s(()=>[m(t(_t),{open:r.value,centered:e.centered,"overlay-blur":e.overlayBlur,onOpened:M[0]||(M[0]=zt=>a("opened")),onClosed:f,onEscapeKeyDown:p,class:K(t(V)(e.containerClass,"left-0 right-0 mx-auto flex max-h-[80%] flex-col p-0 duration-300 sm:w-[520px] sm:max-w-[80%] sm:rounded-[var(--radius)]",{"border border-border":e.bordered,"shadow-3xl":!e.bordered}))},{default:s(()=>[C("div",{class:K(t(V)("relative flex-1 overflow-y-auto p-3",e.contentClass))},[e.title?(l(),c(t(vt),{key:0},{default:s(()=>[C("div",wt,[(l(),c(X(g.value),{class:"mr-2"})),C("span",Ct,A(t(u)(e.title)),1),e.showCancel?(l(),c(t(se),{key:0,"as-child":""},{default:s(()=>[m(t(T),{variant:"ghost",size:"icon",class:"rounded-full",disabled:x.value,onClick:_},{default:s(()=>[m(t(Xe),{class:"size-4 text-muted-foreground"})]),_:1},8,["disabled"])]),_:1})):w("",!0)])]),_:1})):w("",!0),m(t(yt),null,{default:s(()=>[C("div",xt,[m(t(ae),{content:e.content,"render-br":""},null,8,["content"])]),x.value&&e.contentMasking?(l(),c(t(Ce),{key:0,spinning:x.value},null,8,["spinning"])):w("",!0)]),_:1}),C("div",{class:K(["flex items-center justify-end gap-x-2",`justify-${e.buttonAlign}`])},[m(t(ae),{content:e.footer},null,8,["content"]),e.showCancel?(l(),c(t(se),{key:0,"as-child":""},{default:s(()=>[(l(),c(X(t(i).DefaultButton||t(T)),{disabled:x.value,variant:"ghost",onClick:_},{default:s(()=>[k(A(e.cancelText||t(u)("cancel")),1)]),_:1},8,["disabled"]))]),_:1})):w("",!0),m(t(mt),{"as-child":""},{default:s(()=>[(l(),c(X(t(i).PrimaryButton||t(T)),{loading:x.value,onClick:b},{default:s(()=>[k(A(e.confirmText||t(u)("confirm")),1)]),_:1},8,["loading"]))]),_:1})],2)],2)]),_:1},8,["open","centered","overlay-blur","class"])]),_:1},8,["open"]))}}),Z=S([]),{$t}=ie();function Dt(e,o,n){return new Promise((a,r)=>{var g,D;const u=Re(e)?{content:e}:I({},e),i=document.createElement("div");document.body.append(i);const d={container:i,instance:null},f=U(I({onClosed:B=>{Z.value=Z.value.filter(b=>b!==d),te(null,i),i.parentNode&&i.remove(),B?a():r(new Error("dialog cancelled"))}},u),{open:!0,title:(g=u.title)!=null?g:$t.value("prompt")}),p=z(At,f);te(p,i),d.instance=(D=p.component)==null?void 0:D.proxy,Z.value.push(d)})}const Bt=y({__name:"dingding-login",props:{clientId:{},corpId:{},redirectUri:{},isQrCode:{type:Boolean}},setup(e){const o=e,n=xe(),[a,r]=Ze({header:!1,footer:!1,fullscreenButton:!1,class:"w-[302px] h-[302px] dingding-qrcode-login-modal",onOpened(){i()}}),u=()=>{const{redirectUri:f}=o;return f||window.location.origin+n.fullPath},i=()=>N(null,null,function*(){const{clientId:f,corpId:p}=o;window.DTFrameLogin||(yield Fe("https://g.alicdn.com/dingding/h5-dingtalk-login/0.21.0/ddlogin.js")),window.DTFrameLogin({id:"dingding_qrcode_login_element",width:300,height:300},{redirect_uri:encodeURIComponent(u()),client_id:f,scope:"openid corpid",response_type:"code",state:"1",prompt:"consent",corpId:p},g=>{const{redirectUrl:D}=g;window.location.href=D},g=>{Dt(`Login Error: ${g}`)})}),d=()=>{const{clientId:f,corpId:p,isQrCode:g}=o;g?r.open():window.location.href=`https://login.dingtalk.com/oauth2/auth?redirect_uri=${encodeURIComponent(u())}&response_type=code&client_id=${f}&scope=openid&corpid=${p}&prompt=consent`};return(f,p)=>(l(),P("div",null,[m(t(O),{onClick:d,tooltip:t(h)("authentication.dingdingLogin"),"tooltip-side":"top"},{default:s(()=>[m(t(Le))]),_:1},8,["tooltip"]),m(t(a),null,{default:s(()=>[...p[0]||(p[0]=[C("div",{id:"dingding_qrcode_login_element"},null,-1)])]),_:1})]))}}),kt={class:"w-full sm:mx-auto md:max-w-md"},Pt={class:"mt-4 flex items-center justify-between"},Lt={class:"text-muted-foreground text-center text-xs uppercase"},qt={class:"mt-4 flex flex-wrap justify-center"},It=y({name:"ThirdPartyLogin",__name:"third-party-login",setup(e){const{auth:{dingding:o}}=Ae();return(n,a)=>(l(),P("div",kt,[C("div",Pt,[a[0]||(a[0]=C("span",{class:"border-input w-[35%] border-b dark:border-gray-600"},null,-1)),C("span",Lt,A(t(h)("authentication.thirdPartyLogin")),1),a[1]||(a[1]=C("span",{class:"border-input w-[35%] border-b dark:border-gray-600"},null,-1))]),C("div",qt,[m(t(O),{tooltip:t(h)("authentication.wechatLogin"),"tooltip-side":"top",class:"mb-3"},{default:s(()=>[m(t(qe))]),_:1},8,["tooltip"]),m(t(O),{tooltip:t(h)("authentication.qqLogin"),"tooltip-side":"top",class:"mb-3"},{default:s(()=>[m(t(Ie))]),_:1},8,["tooltip"]),m(t(O),{tooltip:t(h)("authentication.githubLogin"),"tooltip-side":"top",class:"mb-3"},{default:s(()=>[m(t(Me))]),_:1},8,["tooltip"]),m(t(O),{tooltip:t(h)("authentication.googleLogin"),"tooltip-side":"top",class:"mb-3"},{default:s(()=>[m(t(Te))]),_:1},8,["tooltip"]),t(o)?(l(),c(Bt,{key:0,"corp-id":t(o).corpId,"client-id":t(o).clientId,class:"mb-3"},null,8,["corp-id","client-id"])):w("",!0)])]))}}),Mt=["onKeydown"],Tt={class:"text-muted-foreground"},St={key:0,class:"mb-6 flex justify-between"},Et={class:"flex-center"},Rt={key:1,class:"mb-2 mt-4 flex items-center justify-between"},Ft={key:0,class:"mt-3 text-center text-sm"},Ot=y({name:"AuthenticationLogin",__name:"login",props:{formSchema:{default:()=>[]},codeLoginPath:{default:"/auth/code-login"},forgetPasswordPath:{default:"/auth/forget-password"},loading:{type:Boolean,default:!1},qrCodeLoginPath:{default:"/auth/qrcode-login"},registerPath:{default:"/auth/register"},showCodeLogin:{type:Boolean,default:!0},showForgetPassword:{type:Boolean,default:!0},showQrcodeLogin:{type:Boolean,default:!0},showRegister:{type:Boolean,default:!0},showRememberMe:{type:Boolean,default:!0},showThirdPartyLogin:{type:Boolean,default:!0},subTitle:{default:""},title:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(e,{expose:o,emit:n}){const a=e,r=n,[u,i]=je(Oe({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:F(()=>a.formSchema),showDefaultActions:!1})),d=$e(),f=`REMEMBER_ME_USERNAME_${location.hostname}`,p=localStorage.getItem(f)||"",g=S(!!p);function D(){return N(this,null,function*(){const{valid:b}=yield i.validate(),_=yield i.getValues();b&&(localStorage.setItem(f,g.value?_==null?void 0:_.username:""),r("submit",_))})}function B(b){d.push(b)}return ue(()=>{p&&i.setFieldValue("username",p)}),o({getFormApi:()=>i}),(b,_)=>(l(),P("div",{onKeydown:Be(H(D,["prevent"]),["enter"])},[v(b.$slots,"title",{},()=>[m(Pe,null,{desc:s(()=>[C("span",Tt,[v(b.$slots,"subTitle",{},()=>[k(A(e.subTitle||t(h)("authentication.loginSubtitle")),1)])])]),default:s(()=>[v(b.$slots,"title",{},()=>[k(A(e.title||`${t(h)("authentication.welcomeBack")} ðŸ‘‹ðŸ»`),1)])]),_:3})]),m(t(u)),e.showRememberMe||e.showForgetPassword?(l(),P("div",St,[C("div",Et,[e.showRememberMe?(l(),c(t(De),{key:0,modelValue:g.value,"onUpdate:modelValue":_[0]||(_[0]=x=>g.value=x),name:"rememberMe"},{default:s(()=>[k(A(t(h)("authentication.rememberMe")),1)]),_:1},8,["modelValue"])):w("",!0)]),e.showForgetPassword?(l(),P("span",{key:0,class:"vben-link text-sm font-normal",onClick:_[1]||(_[1]=x=>B(e.forgetPasswordPath))},A(t(h)("authentication.forgetPassword")),1)):w("",!0)])):w("",!0),m(t(T),{class:K([{"cursor-wait":e.loading},"w-full"]),loading:e.loading,"aria-label":"login",onClick:D},{default:s(()=>[k(A(e.submitButtonText||t(h)("common.login")),1)]),_:1},8,["class","loading"]),e.showCodeLogin||e.showQrcodeLogin?(l(),P("div",Rt,[e.showCodeLogin?(l(),c(t(T),{key:0,class:"w-1/2",variant:"outline",onClick:_[2]||(_[2]=x=>B(e.codeLoginPath))},{default:s(()=>[k(A(t(h)("authentication.mobileLogin")),1)]),_:1})):w("",!0),e.showQrcodeLogin?(l(),c(t(T),{key:1,class:"ml-4 w-1/2",variant:"outline",onClick:_[3]||(_[3]=x=>B(e.qrCodeLoginPath))},{default:s(()=>[k(A(t(h)("authentication.qrcodeLogin")),1)]),_:1})):w("",!0)])):w("",!0),v(b.$slots,"third-party-login",{},()=>[e.showThirdPartyLogin?(l(),c(It,{key:0})):w("",!0)]),v(b.$slots,"to-register",{},()=>[e.showRegister?(l(),P("div",Ft,[k(A(t(h)("authentication.accountTip"))+" ",1),C("span",{class:"vben-link text-sm font-normal",onClick:_[4]||(_[4]=x=>B(e.registerPath))},A(t(h)("authentication.createAccount")),1)])):w("",!0)])],40,Mt))}}),Ht=y({name:"Login",__name:"login",setup(e){const o=ke(),n=F(()=>[{component:"VbenInput",componentProps:{placeholder:h("authentication.usernameTip")},fieldName:"username",label:h("authentication.username"),rules:ne().min(1,{message:h("authentication.usernameTip")})},{component:"VbenInputPassword",componentProps:{placeholder:h("authentication.password")},fieldName:"password",label:h("authentication.password"),rules:ne().min(1,{message:h("authentication.passwordTip")})}]);return(a,r)=>(l(),c(t(Ot),{"form-schema":n.value,loading:t(o).loginLoading,"show-register":!1,"show-code-login":!1,"show-qrcode-login":!1,"show-third-party-login":!1,"show-forget-password":!1,onSubmit:t(o).authLogin},null,8,["form-schema","loading","onSubmit"]))}});export{Ht as _};
